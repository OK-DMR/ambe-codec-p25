#include "mmdvm.h"
#include <oboe/Oboe.h>

extern "C"
JNIEXPORT jint JNI_OnLoad(JavaVM *vm, void *reserved) {
    return JNI_VERSION_1_6;
}

extern "C"
JNIEXPORT void JNICALL
Java_cz_okdmr_mmdvm_MainActivity_getNativeString(JNIEnv *env, jobject thiz) {
    if (!globalPlayer) {
        globalPlayer = new OboePlayer();
    }

    unsigned char voicedata[][9] = {
            {157, 234, 197, 118, 198, 232, 185, 107, 125},
            {249, 170, 164, 82, 78, 144, 21, 225, 171},
            {189, 236, 230, 86, 105, 96, 213, 233, 171},
            {189, 204, 133, 112, 67, 170, 17, 37, 167},
            {223, 142, 194, 48, 102, 166, 193, 103, 43},
            {251, 168, 230, 22, 102, 108, 197, 43, 243},
            {251, 169, 230, 22, 102, 108, 197, 43, 227},
            {217, 168, 196, 86, 70, 44, 193, 43, 243},
            {217, 169, 196, 86, 70, 46, 193, 43, 242},
            {217, 169, 196, 86, 70, 47, 193, 43, 242},
            {217, 169, 196, 86, 70, 47, 192, 43, 242},
            {217, 168, 196, 86, 70, 47, 193, 43, 227},
            {217, 169, 196, 86, 70, 45, 193, 43, 242},
            {217, 169, 196, 86, 70, 44, 193, 41, 242},
            {217, 169, 196, 86, 70, 44, 193, 43, 242},
            {251, 168, 230, 22, 102, 109, 213, 43, 227},
            {251, 168, 230, 22, 102, 109, 197, 43, 227},
            {251, 168, 230, 22, 102, 109, 197, 43, 227},
            {217, 168, 196, 86, 70, 47, 192, 43, 193},
            {217, 168, 196, 86, 70, 45, 225, 11, 227},
            {217, 168, 196, 86, 70, 46, 193, 43, 227},
            {217, 168, 196, 86, 70, 46, 193, 43, 227},
            {217, 168, 196, 86, 70, 46, 193, 43, 227},
            {251, 168, 230, 22, 102, 110, 197, 43, 193},
            {187, 202, 129, 16, 64, 6, 1, 107, 77},
            {187, 202, 129, 16, 64, 4, 1, 107, 77},
            {219, 136, 230, 86, 100, 46, 144, 11, 227},
            {219, 136, 230, 86, 100, 44, 145, 43, 227},
            {217, 168, 196, 86, 70, 44, 193, 43, 227},
            {217, 168, 196, 86, 70, 46, 193, 43, 227},
            {217, 168, 196, 86, 70, 44, 193, 43, 193},
            {217, 169, 196, 86, 70, 44, 193, 43, 208},
            {217, 169, 196, 86, 70, 44, 193, 43, 208},
            {217, 169, 196, 86, 70, 44, 193, 43, 208},
            {217, 169, 196, 86, 70, 46, 193, 43, 208},
            {217, 169, 196, 86, 70, 46, 193, 43, 208},
            {217, 169, 196, 86, 70, 46, 193, 43, 242},
            {251, 169, 230, 22, 102, 108, 197, 43, 242},
            {251, 169, 230, 22, 102, 108, 197, 43, 242},
            {251, 169, 230, 22, 102, 108, 197, 43, 242},
            {251, 169, 230, 22, 102, 108, 197, 43, 242},
            {219, 139, 196, 86, 98, 108, 213, 43, 242},
            {251, 169, 230, 22, 102, 108, 197, 43, 208},
            {251, 169, 230, 22, 102, 110, 196, 11, 242},
            {251, 169, 230, 22, 102, 108, 197, 43, 242},
            {251, 168, 230, 22, 102, 108, 197, 41, 227},
            {251, 169, 230, 22, 102, 110, 197, 43, 242},
            {251, 169, 230, 22, 102, 110, 197, 43, 242},
            {251, 168, 230, 22, 102, 108, 197, 43, 227},
            {251, 169, 230, 22, 102, 110, 197, 43, 242},
            {251, 168, 230, 22, 102, 110, 197, 43, 227},
            {219, 137, 230, 86, 100, 46, 144, 11, 208},
            {219, 137, 230, 86, 100, 44, 145, 43, 208},
            {219, 137, 230, 86, 100, 44, 145, 43, 242},
            {219, 137, 230, 86, 100, 46, 145, 43, 242},
            {219, 137, 230, 86, 100, 46, 144, 43, 208},
            {219, 137, 230, 86, 100, 46, 144, 43, 208},
            {251, 169, 230, 22, 102, 110, 196, 59, 208},
            {251, 169, 230, 22, 102, 109, 229, 11, 208},
            {251, 169, 230, 22, 102, 111, 196, 59, 208},
            {251, 169, 230, 22, 102, 111, 196, 59, 208},
            {251, 169, 230, 22, 102, 108, 196, 59, 208},
            {217, 139, 230, 118, 70, 61, 145, 123, 212},
            {249, 171, 230, 54, 68, 127, 197, 123, 212},
            {251, 169, 230, 22, 102, 110, 197, 59, 208},
            {251, 169, 230, 22, 102, 110, 197, 43, 208},
            {251, 169, 230, 22, 102, 108, 197, 43, 208},
            {251, 169, 230, 22, 102, 108, 197, 43, 208},
            {251, 169, 230, 22, 102, 108, 197, 43, 208},
            {219, 137, 230, 86, 100, 45, 145, 43, 208},
            {219, 137, 230, 86, 100, 45, 145, 43, 208},
            {190, 247, 227, 225, 248, 209, 136, 228, 56},
            {94, 178, 31, 253, 235, 33, 92, 144, 115},
            {30, 151, 2, 249, 176, 29, 229, 93, 239},
            {29, 221, 34, 174, 140, 55, 221, 39, 85},
            {31, 154, 93, 39, 130, 45, 105, 197, 27},
            {88, 216, 34, 176, 10, 157, 116, 206, 126},
            {121, 219, 34, 150, 56, 205, 80, 187, 88},
            {90, 216, 0, 150, 58, 236, 97, 216, 107},
            {94, 255, 57, 50, 91, 205, 132, 53, 80},
            {78, 218, 56, 18, 146, 85, 253, 209, 243},
            {40, 159, 66, 126, 183, 53, 7, 20, 27},
            {56, 157, 96, 24, 247, 81, 52, 0, 25},
            {56, 158, 98, 124, 214, 5, 71, 21, 75},
            {90, 251, 5, 31, 111, 167, 207, 243, 51},
            {60, 158, 102, 57, 26, 84, 59, 155, 102},
            {46, 158, 33, 243, 83, 224, 97, 75, 119},
            {111, 204, 99, 61, 7, 166, 121, 86, 242},
            {56, 237, 3, 53, 3, 125, 15, 229, 86},
            {78, 185, 79, 181, 119, 116, 88, 92, 135},
            {246, 112, 42, 236, 96, 212, 189, 63, 120},
            {241, 71, 132, 102, 46, 143, 45, 20, 139},
            {215, 231, 233, 176, 228, 9, 157, 247, 149},
            {187, 179, 128, 70, 75, 91, 40, 69, 149},
            {166, 163, 227, 98, 17, 173, 85, 127, 67},
            {208, 61, 127, 137, 16, 253, 6, 192, 116},
            {240, 28, 45, 237, 57, 113, 161, 73, 95},
            {122, 216, 163, 48, 51, 155, 221, 35, 187},
            {104, 232, 122, 250, 86, 225, 216, 205, 186},
            {29, 205, 121, 147, 199, 13, 39, 115, 228},
            {121, 233, 15, 83, 76, 117, 228, 31, 186},
            {25, 155, 71, 215, 88, 241, 165, 207, 229},
            {178, 7, 5, 12, 15, 5, 28, 109, 181},
            {241, 117, 96, 12, 74, 93, 233, 75, 40},
            {247, 64, 68, 44, 110, 160, 216, 35, 244},
            {208, 87, 66, 74, 43, 89, 237, 88, 58},
            {148, 18, 58, 6, 8, 73, 101, 141, 151},
            {162, 53, 3, 226, 40, 109, 177, 66, 153},
            {241, 102, 97, 10, 108, 121, 223, 29, 75},
            {246, 65, 100, 46, 111, 165, 252, 85, 134},
            {240, 119, 96, 74, 107, 123, 155, 122, 59},
            {224, 103, 97, 12, 24, 111, 203, 63, 107},
            {227, 119, 1, 73, 67, 132, 105, 161, 20},
            {181, 34, 99, 28, 101, 18, 137, 171, 119},
            {162, 64, 74, 133, 114, 120, 200, 155, 234},
            {179, 86, 43, 196, 176, 95, 23, 135, 71},
            {240, 7, 76, 134, 147, 81, 163, 197, 168},
            {230, 37, 56, 227, 3, 173, 111, 180, 201},
            {194, 32, 43, 124, 4, 75, 213, 178, 109},
            {180, 17, 122, 97, 83, 165, 177, 80, 250},
            {57, 155, 99, 31, 124, 201, 43, 247, 137},
            {120, 155, 36, 17, 164, 5, 4, 174, 49},
            {92, 252, 1, 127, 8, 125, 219, 157, 239},
            {178, 4, 2, 230, 13, 24, 131, 3, 170},
            {243, 84, 100, 228, 43, 97, 7, 3, 71},
            {146, 38, 39, 108, 29, 50, 95, 63, 151},
            {192, 69, 5, 134, 81, 172, 179, 222, 59},
            {244, 21, 14, 109, 2, 245, 229, 233, 194},
            {225, 17, 15, 129, 116, 20, 93, 153, 85},
            {241, 1, 15, 199, 1, 102, 43, 251, 55},
            {149, 96, 189, 2, 206, 215, 154, 71, 63},
            {122, 72, 95, 232, 107, 69, 35, 223, 2},
            {56, 111, 91, 192, 69, 222, 241, 139, 103},
            {46, 82, 105, 17, 148, 209, 171, 171, 15},
            {122, 18, 51, 120, 57, 30, 60, 187, 102},
            {28, 103, 67, 124, 107, 191, 173, 161, 81},
            {78, 32, 38, 47, 162, 29, 19, 66, 30},
            {124, 17, 38, 77, 163, 125, 97, 22, 46},
            {107, 100, 103, 173, 113, 214, 149, 244, 196},
            {92, 113, 77, 109, 21, 146, 34, 121, 206},
            {92, 80, 106, 245, 99, 221, 140, 2, 227},
            {127, 7, 161, 23, 4, 185, 30, 71, 16},
            {188, 149, 197, 48, 68, 93, 157, 197, 55},
            {110, 236, 124, 190, 53, 127, 237, 160, 19},
            {73, 49, 181, 68, 39, 81, 125, 44, 155},
            {238, 174, 224, 114, 68, 227, 208, 69, 63},
            {206, 188, 224, 80, 102, 192, 208, 68, 111},
            {251, 138, 197, 118, 102, 10, 212, 24, 133},
            {223, 174, 224, 112, 6, 166, 192, 84, 77},
            {202, 5, 134, 194, 78, 95, 174, 59, 0},
            {69, 100, 164, 42, 38, 17, 103, 96, 228},
            {252, 157, 226, 112, 36, 196, 149, 85, 15},
            {221, 159, 194, 80, 102, 197, 213, 85, 15},
            {255, 189, 224, 82, 36, 133, 209, 87, 28},
            {249, 152, 231, 116, 38, 109, 213, 91, 197},
            {249, 153, 231, 116, 38, 109, 213, 91, 212},
            {221, 190, 194, 82, 38, 165, 209, 23, 13},
            {63, 215, 120, 174, 48, 133, 197, 71, 74},
            {88, 182, 44, 37, 184, 241, 213, 149, 149},
            {92, 144, 65, 121, 242, 87, 78, 173, 249},
            {12, 189, 66, 228, 124, 93, 161, 194, 106},
            {73, 233, 0, 193, 40, 253, 33, 204, 88},
            {93, 236, 6, 129, 60, 97, 117, 247, 149},
            {79, 153, 34, 67, 92, 87, 12, 116, 74},
            {95, 137, 35, 67, 92, 69, 45, 101, 121},
            {95, 136, 35, 67, 90, 49, 24, 99, 89},
            {61, 235, 103, 71, 90, 61, 249, 53, 198},
            {92, 155, 33, 67, 27, 80, 12, 119, 91},
            {44, 141, 100, 43, 12, 17, 105, 255, 6},
            {61, 174, 70, 41, 92, 84, 31, 154, 37},
            {13, 142, 7, 11, 51, 173, 220, 118, 27},
            {108, 238, 96, 47, 23, 164, 105, 33, 192},
            {10, 169, 5, 227, 53, 24, 116, 87, 159},
            {11, 171, 39, 208, 2, 58, 81, 5, 136},
            {63, 218, 10, 183, 22, 25, 143, 47, 42},
            {160, 53, 75, 204, 70, 67, 91, 51, 60},
            {150, 127, 108, 206, 176, 125, 104, 209, 159},
            {208, 159, 225, 66, 5, 223, 111, 131, 133},
            {178, 252, 133, 6, 81, 195, 206, 146, 63},
            {179, 238, 165, 102, 51, 243, 217, 129, 73},
            {249, 193, 134, 16, 32, 155, 40, 253, 71},
            {250, 209, 133, 71, 70, 184, 75, 207, 87},
            {235, 194, 134, 5, 71, 238, 95, 252, 85},
            {28, 213, 128, 65, 49, 184, 133, 169, 111},
            {26, 226, 93, 188, 52, 13, 144, 24, 179},
            {31, 129, 123, 243, 99, 201, 66, 255, 172},
            {104, 144, 68, 27, 30, 37, 80, 70, 197},
            {47, 175, 6, 8, 16, 253, 223, 22, 26},
            {124, 221, 39, 227, 109, 68, 67, 145, 165},
            {74, 217, 13, 35, 127, 51, 151, 8, 168},
            {120, 219, 45, 50, 90, 101, 192, 59, 255},
            {72, 235, 109, 20, 117, 253, 16, 176, 132},
            {106, 249, 95, 20, 102, 205, 16, 240, 132},
            {27, 222, 72, 88, 47, 96, 177, 131, 167},
            {107, 235, 45, 7, 126, 5, 181, 8, 136},
            {121, 202, 14, 97, 29, 71, 150, 43, 153},
            {73, 203, 47, 7, 127, 113, 151, 10, 136},
            {122, 232, 61, 97, 124, 116, 245, 110, 250},
            {122, 249, 63, 82, 10, 69, 166, 40, 153},
            {89, 249, 6, 30, 79, 225, 143, 177, 2},
            {29, 175, 68, 30, 13, 55, 75, 236, 6},
            {12, 174, 100, 43, 92, 20, 94, 219, 22},
            {14, 159, 68, 46, 57, 37, 24, 169, 54},
            {76, 153, 71, 236, 33, 241, 100, 130, 9},
            {93, 136, 77, 132, 100, 0, 77, 72, 243},
            {28, 251, 40, 132, 36, 60, 139, 46, 43},
            {45, 235, 42, 160, 7, 76, 200, 10, 92},
            {27, 230, 79, 173, 203, 194, 235, 201, 1},
            {62, 229, 91, 174, 115, 245, 224, 20, 13},
            {42, 148, 13, 195, 105, 255, 229, 88, 125},
            {12, 179, 42, 225, 13, 69, 211, 20, 128},
            {74, 73, 108, 159, 79, 32, 48, 219, 102},
            {122, 91, 45, 217, 96, 137, 177, 34, 42},
            {25, 110, 27, 149, 124, 69, 48, 67, 127},
            {124, 125, 94, 53, 121, 160, 159, 143, 164},
            {182, 219, 2, 214, 110, 77, 3, 87, 16},
            {209, 252, 86, 86, 194, 1, 226, 89, 59},
            {241, 207, 102, 86, 230, 117, 208, 125, 46},
            {212, 154, 99, 126, 105, 31, 94, 13, 177},
            {211, 143, 102, 56, 44, 244, 79, 1, 127},
            {176, 254, 24, 115, 108, 88, 195, 201, 93},
            {172, 53, 46, 6, 125, 171, 188, 83, 135},
            {104, 160, 78, 87, 106, 240, 28, 171, 73},
            {121, 244, 115, 255, 63, 96, 60, 178, 63},
            {122, 233, 14, 38, 92, 116, 244, 89, 203},
            {58, 204, 14, 227, 87, 244, 201, 38, 128},
            {77, 185, 109, 150, 64, 3, 92, 9, 214},
            {95, 139, 111, 144, 64, 97, 105, 43, 162},
            {239, 140, 227, 112, 6, 134, 209, 96, 9},
            {223, 92, 225, 244, 176, 202, 28, 53, 156},
            {58, 75, 210, 30, 134, 161, 30, 123, 255},
            {25, 8, 91, 188, 53, 226, 64, 20, 194},
            {40, 109, 73, 224, 3, 220, 148, 218, 35},
            {28, 93, 31, 130, 149, 23, 43, 159, 50},
            {14, 88, 56, 9, 57, 243, 173, 83, 187},
            {76, 43, 100, 36, 59, 93, 23, 250, 158},
            {95, 26, 70, 100, 15, 95, 32, 141, 220},
            {63, 68, 100, 178, 61, 145, 85, 155, 122},
            {122, 35, 70, 144, 21, 170, 116, 76, 85},
            {15, 2, 45, 243, 48, 246, 73, 87, 122},
            {24, 25, 107, 190, 83, 182, 22, 3, 161},
            {75, 75, 228, 114, 20, 241, 145, 157, 28},
            {144, 180, 197, 119, 81, 114, 20, 35, 189},
            {239, 172, 224, 50, 102, 147, 228, 22, 47},
            {251, 138, 229, 54, 100, 76, 195, 59, 227},
            {217, 137, 198, 54, 102, 108, 224, 91, 243},
            {217, 137, 198, 54, 102, 110, 224, 105, 211},
            {217, 137, 199, 54, 102, 110, 224, 105, 211},
            {147, 142, 193, 198, 132, 241, 106, 93, 95},
            {172, 76, 225, 113, 65, 148, 28, 141, 19},
            {142, 126, 192, 39, 35, 208, 63, 253, 114},
            {109, 205, 167, 55, 50, 71, 140, 8, 18},
            {92, 220, 167, 87, 80, 21, 189, 27, 7},
            {253, 173, 224, 48, 71, 229, 209, 53, 93},
            {255, 175, 224, 16, 100, 228, 241, 117, 89},
            {218, 153, 197, 54, 100, 44, 215, 57, 145},
            {216, 155, 197, 22, 71, 45, 215, 121, 149},
            {219, 137, 197, 54, 100, 44, 215, 25, 145},
            {219, 137, 196, 54, 100, 44, 215, 25, 145},
            {219, 136, 196, 54, 100, 44, 215, 57, 129},
            {219, 136, 196, 54, 100, 44, 214, 25, 129},
            {219, 136, 198, 84, 4, 12, 241, 57, 129},
            {249, 171, 196, 116, 100, 14, 241, 25, 145},
            {249, 168, 228, 118, 38, 40, 245, 57, 129},
            {249, 169, 228, 118, 38, 40, 229, 57, 145},
            {219, 137, 196, 54, 100, 44, 245, 57, 145},
            {219, 137, 196, 54, 100, 44, 245, 57, 145},
            {249, 168, 228, 118, 38, 40, 245, 57, 129},
            {249, 168, 228, 118, 38, 40, 214, 25, 129},
            {249, 169, 228, 118, 38, 40, 245, 57, 145},
            {249, 168, 228, 118, 38, 40, 245, 57, 129},
            {249, 168, 228, 118, 38, 40, 245, 57, 129},
            {219, 136, 196, 54, 100, 44, 245, 57, 129},
            {219, 136, 196, 54, 100, 44, 245, 57, 129},
            {219, 136, 196, 54, 100, 46, 245, 25, 129},
            {217, 138, 196, 22, 71, 46, 245, 89, 133},
            {251, 136, 230, 22, 68, 14, 245, 25, 133},
            {251, 136, 230, 22, 68, 14, 245, 25, 133},
            {219, 136, 196, 54, 100, 44, 245, 57, 129},
            {249, 168, 228, 118, 38, 42, 245, 25, 129},
            {219, 137, 196, 54, 100, 44, 245, 57, 145},
            {219, 137, 196, 54, 100, 44, 245, 57, 145},
            {219, 137, 196, 54, 100, 44, 245, 57, 145},
            {251, 137, 230, 22, 68, 12, 214, 25, 149},
            {251, 137, 230, 22, 68, 12, 215, 25, 149},
            {251, 137, 230, 22, 68, 12, 215, 57, 149},
            {251, 137, 231, 22, 68, 12, 215, 25, 149},
            {251, 137, 231, 22, 68, 12, 215, 41, 181},
            {251, 137, 231, 22, 68, 14, 244, 57, 149},
            {251, 136, 230, 22, 68, 14, 245, 57, 133},
            {251, 136, 230, 22, 68, 14, 244, 57, 133},
            {251, 136, 230, 22, 68, 12, 215, 57, 133},
            {219, 136, 198, 84, 4, 12, 210, 25, 129},
            {218, 152, 196, 54, 100, 44, 214, 24, 129},
            {248, 184, 228, 118, 38, 40, 215, 57, 129},
            {249, 168, 228, 118, 38, 40, 215, 25, 129},
            {219, 136, 196, 54, 100, 44, 214, 25, 129},
            {219, 136, 196, 54, 100, 44, 214, 25, 129},
            {219, 136, 196, 54, 100, 44, 245, 57, 129},
            {219, 136, 196, 54, 100, 44, 214, 25, 129},
            {249, 168, 228, 118, 38, 40, 245, 57, 129},
            {249, 169, 229, 118, 38, 40, 245, 41, 177},
            {249, 169, 229, 118, 38, 40, 245, 41, 177},
            {185, 232, 129, 82, 97, 115, 0, 42, 107},
            {185, 232, 129, 82, 97, 115, 0, 42, 107},
            {185, 232, 129, 82, 97, 115, 0, 42, 107},
    };

    for (auto &i: voicedata) {
        globalPlayer->addAmbeSamples(i);
    }

    auto prepareAudioResult = globalPlayer->prepareAudio();
    __android_log_print(ANDROID_LOG_WARN, "mmdvm.cpp", "prepareAudio %d", prepareAudioResult);
    auto startAudioResult = globalPlayer->startAudio();
    __android_log_print(ANDROID_LOG_WARN, "mmdvm.cpp", "startAudio %d", startAudioResult);
}